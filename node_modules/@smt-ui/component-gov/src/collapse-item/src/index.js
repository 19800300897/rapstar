 /**
  * @file 折叠面板组件
  * @author swan
  */

/* globals Component, swan */

import {isIos} from '../../common/utils/index';

Component({
    externalClasses: [
        'gov-collapse-title',
        'gov-collapse-desc',
        'gov-collapse-sub-title',
        'gov-collapse-custom'
    ],

    properties: {
        // 主标题
        title: {
            type: String,
            value: ''
        },
        // 详情
        desc: {
            type: String,
            value: ''
        },
        // 副标题
        subTitle: {
            type: String,
            value: ''
        },
        // 右侧描述文字
        content: {
            type: String,
            value: ''
        },
        // 展开后的数据
        dataSource: {
            type: Array,
            value: []
        },
        // 展开列表展示方式 list-box: 灰色背景 / grid-box: 白色背景, 文案间距较小 / 空字段： 纯文本
        mode: {
            type: String,
            value: ''
        },
        // 默认展开
        expand: {
            type: Boolean,
            value: false
        },
        // 是否自定义折叠面板收纳的内容区域
        isCustomCon: {
            type: Boolean,
            value: false
        }
    },

    data: {
        isIos
    },

    methods: {

        /**
         * item点击，管理展开收起状态
         */
        collapseHandler() {
            this.triggerEvent('expand', {expand: !this.data.expand});
            console.log(!this.data.expand);
            this.setData({
                expand: !this.data.expand
            });
        },

        /**
         * list项点击事件
         * @param {Object} param - 当前点击项的数据
         */
        itemHandler({currentTarget}) {
            const ind = currentTarget.dataset.id;
            const item = this.dataset.source[ind];
            if (this.data.mode === 'grid-box' && item.event) {
                this.triggerEvent('click', item);
            }
        }
    }
});
