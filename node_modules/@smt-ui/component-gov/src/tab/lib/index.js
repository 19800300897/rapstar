"use strict";

var _index = require("../../common/utils/index");

/**
 * @file index.js
 * @author LipengJia <jialipeng@baidu.com>
 * @date 2020-01-02
 */
Component({
  properties: {
    activeName: {
      type: String,
      value: '',
      observer: function observer(n) {
        var _this = this;

        var activeTarget = this.child[n];

        if (activeTarget) {
          Object.values(this.child).forEach(function (el) {
            el.setActive(false);
            el.setWidth("".concat((100 / _this.count).toFixed(3), "vw"));
          });
          activeTarget.setActive(true);
        }
      }
    }
  },
  messages: {
    itemUpdate: function itemUpdate(_ref) {
      var target = _ref.target,
          value = _ref.value;

      if (this.child[value] == null) {
        this.count++;
      } else {
        console.error('tab-item存在相同name，可能出错');
      }

      this.child[value] = target;
    },
    itemTap: function itemTap(_ref2) {
      var value = _ref2.value;

      if (value === this.data.activeName || !value) {
        return;
      }

      this.triggerEvent('change', value);
    }
  },
  data: {
    isIos: _index.isIos
  },
  created: function created() {
    this.child = {};
    this.count = 0;
  }
});