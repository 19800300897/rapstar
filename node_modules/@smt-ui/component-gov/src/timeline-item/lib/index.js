"use strict";

var _color = require("../../common/style/color");

/**
 * @file 时间轴子项
 * @author swan
 */

/* global Page, swan, getApp */
// 默认各状态样式（icon和icon对应颜色）
var defaultStatusStyle = {
  finished: {
    icon: 'complete-o',
    iconColor: _color.COLOR_BLUE
  },
  wait: {
    icon: 'time',
    iconColor: _color.COLOR_BLUE
  },
  success: {
    icon: 'complete',
    iconColor: _color.COLOR_BLUE
  },
  error: {
    icon: 'error',
    iconColor: _color.COLOR_RED
  }
};
/* eslint-disable fecs-camelcase */

Component({
  /* eslint-enable */
  externalClasses: ['gov-item-tail', 'gov-content-title', 'gov-content-slot'],
  properties: {
    status: {
      // 步骤的状态，可选 wait/finished/success/error
      type: String,
      value: 'wait'
    },
    title: {
      type: String,
      value: ''
    },
    desc: {
      type: String,
      value: ''
    },
    descStyle: {
      type: String,
      value: ''
    },
    icon: {
      type: String,
      value: ''
    },
    iconColor: {
      type: String,
      value: ''
    }
  },
  data: {
    timeStatus: '',
    timeHasTail: false,
    timeIcon: '',
    timeIconColor: ''
  },
  methods: {
    initData: function initData() {
      var _this$data = this.data,
          status = _this$data.status,
          icon = _this$data.icon,
          iconColor = _this$data.iconColor,
          hasTail = _this$data.hasTail;
      var timeStatus = /finished|wait|success|error/.test(status) ? status : 'wait';
      var timeIcon = icon || defaultStatusStyle[timeStatus].icon;
      var timeIconColor = iconColor || defaultStatusStyle[timeStatus].iconColor;
      /**
      * 自定义有/无过程线 或 默认
      * 默认：finished、wait为未结束（有过程线）, success、error为流程结束（无过程线）
      */

      var timeHasTail = typeof hasTail === 'undefined' ? /finished|wait/.test(timeStatus) : hasTail;
      this.setData({
        timeStatus: timeStatus,
        timeIcon: timeIcon,
        timeIconColor: timeIconColor,
        timeHasTail: timeHasTail
      });
    }
  },
  created: function created() {
    this.initData();
  }
});