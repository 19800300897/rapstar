/**
 * @file index.js
 * @author swan
 * @date 2020-03-04
 */

import {COLOR_RED} from '../../common/style/color';
import {isFullScreen} from '../../common/utils/index';

Component({
    externalClasses: [
        'gov-serv-entry-img',
        'gov-title',
        'gov-desc',
        'gov-list',
        'gov-list-item',
        'gov-text',
        'gov-tel',
        'gov-tel-number'
    ],

    properties: {
        image: {
            type: String,
            value: ''
        },
        title: {
            type: String,
            value: ''
        },
        desc: {
            type: String,
            value: ''
        },
        list: {
            type: Array,
            value: []
        },
        hotline: {
            type: String,
            value: ''
        },
        botton: {
            type: String,
            value: '在线办理'
        },
        bottoncolor: {
            type: String,
            value: COLOR_RED
        },
        phonecontent: {
            type: String,
            value: '热线电话'
        }
    },

    data: {
        isFullScreen
    },

    /**
     * 点击列表
     *
     */
    clickList(e) {
        let index = e.currentTarget.dataset.index;
        this.triggerEvent('clicklist', index);
    },

    /**
     * 点击电话
     *
     */
    clickHotline() {
        swan.makePhoneCall({
            phoneNumber: this.data.hotline,
            fail: err => {
                swan.showModal({
                    title: '拨打失败',
                    content: '请检查是否输入了正确的电话号码',
                    showCancel: false
                });
            }
        });
    },

    /**
     * 点击按钮
     *
     */
    clickBtn() {
        this.triggerEvent('clickbtn');
    }
});
