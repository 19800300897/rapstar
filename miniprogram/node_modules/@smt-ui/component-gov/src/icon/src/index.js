/**
 * @file index.js
 * @author afcfzf <9301462@qq.com>
 * @date 2020-01-01
 */

Component({ // eslint-disable-line
    extrnalClasses: ['gov-icon'],

    properties: {
        name: {
            type: String,
            value: ''
        },

        size: {
            type: String,
            value: '36.232rpx'
        },

        color: {
            type: [Array, String],
            value: '',
            observer(n) {
                let fixedColor = n;
                const trans = hexColor => {
                    if (hexColor && hexColor.charAt(0) === '#') {
                        return '%23' + hexColor.slice(1);
                    }
                    return hexColor;
                };
                if (typeof n === 'string') {
                    fixedColor = trans(n);
                }
                else {
                    fixedColor = [];
                    for (const i of n) {
                        fixedColor.push(trans(i));
                    }
                }
                this.setData({
                    singleColor: typeof n === 'string',
                    fixedColor
                });
            }
        },

        quot: {
            type: String,
            value: '"'
        }
    },

    data: {
        singleColor: true,
        inited: false,
        fixedColor: ''
    },

    attached() {
        // 防止抖动
        this.setData({inited: true});
    }
});
