"use strict";

/**
 * @file collapse-panel组件
 * @author swan
 */

/* globals Page, swan, getApp, getCurrentPages */
Component({
  externalClasses: ['gov-expand-collapse', 'gov-expand-full', 'gov-expand-action'],
  properties: {
    height: {
      type: String,
      value: '130px'
    },
    actionFontSize: {
      type: String,
      value: '16px'
    },
    actionFontColor: {
      type: String,
      value: '#999'
    },
    showAction: {
      type: Boolean,
      value: false
    },
    btnText: {
      type: Array,
      value: ['查看更多', '收起']
    },
    isFadeOut: {
      type: Boolean,
      value: true
    }
  },
  data: {
    // 默认收起
    expand: false,
    // 记录上一次的高度
    defaultHeight: ''
  },
  created: function created() {
    if (this.data.showAction) {
      this.setData({
        showAction: true,
        height: this.data.height,
        defaultHeight: this.data.height
      });
    } else {
      this.setData({
        showAction: false,
        height: 'auto',
        defaultHeight: 'auto'
      });
    }
  },
  methods: {
    expandAction: function expandAction() {
      var expand = !this.data.expand;
      var height = expand ? 'auto' : this.data.defaultHeight;
      this.setData({
        expand: expand,
        height: height
      });
      this.triggerEvent('expand', {
        expand: expand
      });
    }
  }
});